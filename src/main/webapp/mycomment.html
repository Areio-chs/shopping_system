<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7; IE=EDGE">
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7"/>
    <title>我的评价</title>
    <link rel="icon" href="./img/favicon.ico">


    <link rel="stylesheet" type="text/css" href="./css/all.css"/>
    <link rel="stylesheet" type="text/css" href="./css/pages-application.css"/>
    <link rel="stylesheet" type="text/css" href="./css/pages-mycomment.css"/>
</head>

<body>
<div id="app">
    <!-- 头部栏位 -->
    <!--页面顶部-->
    <div id="nav-bottom">
        <!--顶部-->
        <div class="nav-top">
            <div class="top">
                <div class="py-container">
                    <div class="shortcut">
                        <ul class="fl">
                            <li class="f-item">青柠欢迎您！</li>
                            <li class="f-item" v-if="this.info==''||this.info==null">请
                                <a href="login.html" >登录</a>
                                <span>
									<a href="register.html" >免费注册</a>
								</span>
                            </li>
                            <li class="f-item" style="color: blue" v-else>
                                {{loginUserName}}
                                <span>
									<a style="color: blue"  @click="logout()">退出登录</a>
								</span>
                            </li>
                        </ul>
                        <div class="fr typelist">
                            <ul class="types">
                                <li class="f-item"><span>我的订单</span></li>

                                <li class="f-item"><span><a href="cart.html" target="_blank">我的购物车</a></span></li>
                                <li class="f-item"><span><a href="home.html" target="_blank">我的青橙</a></span></li>
                                <li class="f-item"><span>青橙会员</span></li>
                                <li class="f-item"><span>企业采购</span></li>
                                <li class="f-item"><span>关注青橙</span></li>
                                <li class="f-item"><span><a href="cooperation.html" target="_blank">合作招商</a></span></li>
                                <li class="f-item"><span><a href="shoplogin.html" target="_blank">商家后台</a></span></li>
                                <li class="f-item"><span>网站导航</span></li>
                            </ul>
                        </div>

                    </div>
                </div>
            </div>

            <!--头部-->
            <div class="header">
                <div class="py-container">
                    <div class="yui3-g Logo">
                        <div class="yui3-u Left logoArea">
                            <a class="logo-bd" title="青橙" href="index.html" target="_blank"></a>
                        </div>
                        <div class="yui3-u Rit searchArea">
                            <div class="search">
                                <form action="" class="sui-form form-inline">
                                    <!--searchAutoComplete-->
                                    <div class="input-append">
                                        <input type="text" id="autocomplete" class="input-error input-xxlarge"
                                               v-model="searchName"/>
                                        <button class="sui-btn btn-xlarge btn-danger" type="button"
                                                @click="submitForm()">搜索</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 评价订单 -->
    <div class="mycomment">
        <div class="py-container">
            <div class="head">
                <p class="tit">评价订单</p>
                <p class="num"><span class="gray">订单号：</span>{{orderDetail.orderNum}}&nbsp;&nbsp;&nbsp;&nbsp;<span
                        class="gray">{{orderDetail.created}}&nbsp;</span></p>
            </div>
            <div class="goods">
                <div class="good-item">
                    <div class="left">
                        <div class="img-intro">
                            <img :src="orderDetail.image"/>
                            <p><a href="#">{{orderDetail.goodsName}}</a></p>
                            <p>¥{{orderDetail.goodsPrice}}</p>
                            <p class="gray">{{orderDetail.spec}}</p>
                        </div>
                    </div>
                    <div class="right">
                        <p class="warn">请至少填写一件商品的评价</p>
                        <div class="summary-wrap clearfix">
                            <dl>
                                <dt style="vertical-align:middle">评价晒单</dt>
                                <div class="input">
                                    <div class="demo">
                                        <div id="default-demo"></div>
                                    </div>
                                </div>
                            </dl>
                            <dl class="tags">
                                <dt>
                                    <div class="title">
                                        <i>卖家印象</i>
                                    </div>
                                </dt>
                                <dd>
                                        <div class="radio">
                                            <label>
                                                <input type="radio" name="optionsRadios" id="optionsRadios1" value="1"
                                                       v-model="evaluation.grade">
                                                ★&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            </label>
                                        </div>
                                </dd>
                                <dd>
                                <div class="radio">
                                    <label>
                                        <input type="radio" name="optionsRadios" id="optionsRadios2" value="2"
                                               v-model="evaluation.grade">
                                        ★★&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </label>
                                </div>
                                </dd>
                                <dd>
                                <div class="radio">
                                    <label>
                                        <input type="radio" name="optionsRadios" id="optionsRadios3" value="3"
                                               v-model="evaluation.grade">
                                        ★★★&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </label>
                                </div>
                                </dd>
                                <dd>
                                <div class="radio">
                                    <label>
                                        <input type="radio" name="optionsRadios" id="optionsRadios4" value="4"
                                               v-model="evaluation.grade">
                                        ★★★★&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </label>
                                </div>
                                </dd>
                                <dd>
                                <div class="radio">
                                    <label>
                                        <input type="radio" name="optionsRadios" id="optionsRadios5" value="5"
                                               v-model="evaluation.grade">
                                        ★★★★★
                                    </label>
                                </div>
                                </dd>
                        </dl>
                        <dl>
                            <dt>评价晒单</dt>

                            <dd>
                            <div class="input"><textarea id="inputComment" name="inputComment"
                                                         v-model="evaluation.content"
                                                         placeholder="商品是否给力？快分享你的购物心得吧~"></textarea>
                            </div>
                            </dd>
                        </dl>
                    </div>
                </div>
                <div style="clear:both"></div>
            </div>
        </div>
        <div class="submit">
            <button class="sui-btn btn-danger btn-submit" @click="submitEvaluation">提交</button>
            <input type="radio" name="type" value="1"><span>匿名评价</span>
        </div>
    </div>
</div>
<!-- 底部栏位 -->
<!--页面底部-->
<div class="clearfix footer">
    <div class="py-container">
        <div class="footlink">
            <div class="Mod-service">
                <ul class="Mod-Service-list">
                    <li class="grid-service-item intro  intro1">

                        <i class="serivce-item fl"></i>
                        <div class="service-text">
                            <h4>正品保障</h4>
                            <p>正品保障，提供发票</p>
                        </div>

                    </li>
                    <li class="grid-service-item  intro intro2">

                        <i class="serivce-item fl"></i>
                        <div class="service-text">
                            <h4>正品保障</h4>
                            <p>正品保障，提供发票</p>
                        </div>

                    </li>
                    <li class="grid-service-item intro  intro3">

                        <i class="serivce-item fl"></i>
                        <div class="service-text">
                            <h4>正品保障</h4>
                            <p>正品保障，提供发票</p>
                        </div>

                    </li>
                    <li class="grid-service-item  intro intro4">

                        <i class="serivce-item fl"></i>
                        <div class="service-text">
                            <h4>正品保障</h4>
                            <p>正品保障，提供发票</p>
                        </div>

                    </li>
                    <li class="grid-service-item intro intro5">

                        <i class="serivce-item fl"></i>
                        <div class="service-text">
                            <h4>正品保障</h4>
                            <p>正品保障，提供发票</p>
                        </div>

                    </li>
                </ul>
            </div>
            <div class="clearfix Mod-list">
                <div class="yui3-g">
                    <div class="yui3-u-1-6">
                        <h4>购物指南</h4>
                        <ul class="unstyled">
                            <li>购物流程</li>
                            <li>会员介绍</li>
                            <li>生活旅行/团购</li>
                            <li>常见问题</li>
                            <li>购物指南</li>
                        </ul>

                    </div>
                    <div class="yui3-u-1-6">
                        <h4>配送方式</h4>
                        <ul class="unstyled">
                            <li>上门自提</li>
                            <li>211限时达</li>
                            <li>配送服务查询</li>
                            <li>配送费收取标准</li>
                            <li>海外配送</li>
                        </ul>
                    </div>
                    <div class="yui3-u-1-6">
                        <h4>支付方式</h4>
                        <ul class="unstyled">
                            <li>货到付款</li>
                            <li>在线支付</li>
                            <li>分期付款</li>
                            <li>邮局汇款</li>
                            <li>公司转账</li>
                        </ul>
                    </div>
                    <div class="yui3-u-1-6">
                        <h4>售后服务</h4>
                        <ul class="unstyled">
                            <li>售后政策</li>
                            <li>价格保护</li>
                            <li>退款说明</li>
                            <li>返修/退换货</li>
                            <li>取消订单</li>
                        </ul>
                    </div>
                    <div class="yui3-u-1-6">
                        <h4>特色服务</h4>
                        <ul class="unstyled">
                            <li>夺宝岛</li>
                            <li>DIY装机</li>
                            <li>延保服务</li>
                            <li>品优购E卡</li>
                            <li>品优购通信</li>
                        </ul>
                    </div>
                    <div class="yui3-u-1-6">
                        <h4>帮助中心</h4>
                        <img src="./img/wx_cz.jpg">
                    </div>
                </div>
            </div>
            <div class="Mod-copyright">
                <ul class="helpLink">
                    <li>关于我们<span class="space"></span></li>
                    <li>联系我们<span class="space"></span></li>
                    <li>关于我们<span class="space"></span></li>
                    <li>商家入驻<span class="space"></span></li>
                    <li>营销中心<span class="space"></span></li>
                    <li>友情链接<span class="space"></span></li>
                    <li>关于我们<span class="space"></span></li>
                    <li>营销中心<span class="space"></span></li>
                    <li>友情链接<span class="space"></span></li>
                    <li>关于我们</li>
                </ul>
                <p>地址：北京市昌平区建材城西路金燕龙办公楼一层 邮编：100096 电话：400-618-4000 传真：010-82935100</p>
                <p>京ICP备08001421号京公网安备110108007702</p>
            </div>
        </div>
    </div>
</div>
<!--页面底部END-->
</div>
</body>
<script type="text/javascript" src="/js/vue.js"></script>
<script type="text/javascript" src="/js/axios.js"></script>
<script src="/js/util.js"></script>
<script>
    new Vue({
        el: '#app',
        data() {
            return {
                evaluation: {
                    goodsId: "",
                    orderDetailId: ""
                },
                orderDetail: [],
                orderList: [],
                orderDetailList: [],
                currentPage: 1,//当前页
                total: 10,//总记录数
                all: 10, //总页数
                size: 3,//页面大小
                searchName:"",
                loginUserName: '',
                info: {},
                id: ""
            }
        },
        created() {
            this.id = getQueryString('orderDetailId');
            this.login();
            this.findDetail();
            alert(id);
        },
        methods: {
            login() {
                // alert("加载");
                this.info = JSON.parse(window.sessionStorage.getItem("userInfo"));
                if (this.info != null) {
                    this.loginUserName = this.info.name;
                    this.searchMap.userId = this.info.id;
                }
            },
            logout() {
                sessionStorage.removeItem("userInfo");
                window.location.href = "index.html"
            },
            findDetail() {
                axios.get(`/orderDetail/findById.do?id=${this.id}`).then(response => {
                    this.orderDetail = response.data;
                    this.evaluation.orderDetailId = this.orderDetail.id;
                    this.evaluation.goodsId = this.orderDetail.goodsId;
                });
            },
            submitForm() {
                if (this.searchName == "") {
                    window.location.href = "search.html";
                } else {
                    window.location.href = "search.html?name=" + this.searchName;
                }
            },
            submitEvaluation() {
                axios.post(`/evaluation/add.do`, this.evaluation).then(response => {
                    alert("ok");
                });
            }
        }
    })
</script>
</html>