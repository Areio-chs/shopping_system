<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7; IE=EDGE">
	<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
	<title>青柠，欢迎登录</title>
	<link rel="icon" href="./img/favicon.ico">

    <link rel="stylesheet" type="text/css" href="./css/all.css" />
    <link rel="stylesheet" type="text/css" href="./css/pages-login.css" />
	<style>
		.message{
			font-size: 13px;
			color: red;
		}
	</style>
</head>

<body>
	<!-- 头部栏位 -->
	<!--页面顶部-->
<div id="nav-bottom">
	<!--顶部-->
	<div class="nav-top">
		<div class="top">
			<div class="py-container">
				<div class="shortcut">
					<ul class="fl">
						<li class="f-item">青柠欢迎您！</li>
						<li class="f-item">请<a href="login.html" target="_blank">登录</a>　<span><a href="register.html" target="_blank">免费注册</a></span></li>
					</ul>
					<div class="fr typelist">
						<ul class="types">
							<li class="f-item"><span>我的订单</span></li>
							<li class="f-item"><span><a href="cart.html" target="_blank">我的购物车</a></span></li>
							<li class="f-item"><span><a href="home.html" target="_blank">我的青柠</a></span></li>
							<li class="f-item"><span>青柠会员</span></li>
							<li class="f-item"><span>企业采购</span></li>						
							<li class="f-item"><span>关注青柠</span></li>
							<li class="f-item"><span><a href="cooperation.html" target="_blank">合作招商</a></span></li>
							<li class="f-item"><span><a href="s-login.html" target="_blank">商家后台</a></span></li>
							<li class="f-item"><span>网站导航</span></li>
						</ul>
					</div>
					
				</div>
			</div>
		</div>

		<!--头部-->
		<div class="header">
			<div class="py-container">
				<div class="yui3-g Logo">
					<div class="yui3-u Left logoArea">
						<a class="logo-bd" title="青柠" href="index.html" target="_blank"></a>
					</div>
					<div class="yui3-u Rit searchArea">
						<div class="search">
							<form action="" class="sui-form form-inline">
								<!--searchAutoComplete-->
								<div class="input-append">
									<input type="text" id="autocomplete" class="input-error input-xxlarge" />
									<button class="sui-btn btn-xlarge btn-danger" type="button">搜索</button>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

	<div class="login-box">

		<!--loginArea-->
		<div id="app" class="loginArea">
			<div class="py-container login">
				<div class="loginform">
					<ul class="sui-nav nav-tabs tab-wraped">
						<li id="tabOtherLogin" onclick="switchOtherLogin()">
							<a href="javascript:void(0)" data-toggle="tab" >
								<h3>扫描登录</h3>
							</a>
						</li>
						<li id="tabSuiForm" class="active" onclick="switchSuiForm()">
							<a href="javascript:void(0)" data-toggle="tab" >
								<h3>账户登录</h3>
							</a>
						</li>
					</ul>
					<div class="tab-content tab-wraped">
						<div id="index" class="tab-pane ">
							<p>二维码登录，暂为官网二维码</p>
							<img src="./img/wx_cz.jpg" />
						</div>
						<div id="profile" class="tab-pane active">
							<form class="sui-form">
								<div class="input-prepend"><span class="add-on loginname"></span>
									<input id="inputName" name="username" type="text" v-model="pojo.username" ref="nameInput" @blur="checkName()" placeholder="请输入用户名" class="span2 input-xfat">
								</div>
								<div>
									<span class="message">{{nameMessage}}</span>
								</div>
								<div class="input-prepend"><span class="add-on loginpwd"></span>
									<input id="inputPassword" name="password" type="password" v-model="pojo.password" ref="pwInput" @blur="checkPassword()" placeholder="请输入密码" class="span2 input-xfat">

								</div>
								<div>
									<span class="message">{{pwMessage}}</span>
								</div>
								<div class="setting">
									<label class="checkbox inline">
										<input name="m1" type="checkbox" value="2" checked="">
										自动登录
									</label>
									<span class="forget">忘记密码？</span>
								</div>
								<div class="logined">
									<a class="sui-btn btn-block btn-xlarge btn-danger" @click="login()">登&nbsp;&nbsp;录</a>
								</div>
							</form>
							<div class="otherlogin">
								<div class="types">
									<ul>
										<li><img src="./img/qq.png" width="35px" height="35px" /></li>
										<li><img src="./img/sina.png" /></li>
										<li><img src="./img/ali.png" /></li>
										<li><img src="./img/weixin.png" /></li>
									</ul>
								</div>
								<span class="register"><a href="register.html" target="_blank">立即注册</a></span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!--foot-->
		<div class="py-container copyright">
			<ul>
				<li>关于我们</li>
				<li>联系我们</li>
				<li>联系客服</li>
				<li>商家入驻</li>
				<li>营销中心</li>
				<li>手机品优购</li>
				<li>销售联盟</li>
				<li>品优购社区</li>
			</ul>
			<div class="address">地址：广东省广州市海珠区仲恺路仲恺办公楼一层 邮编：100066 电话：400-666-4000 传真：010-82565600</div>
			<div class="beian">粤ICP备08001421号粤公网安备110108006602
			</div>
		</div>
	</div>

	<script src="js/vue.js"></script>
	<script src="js/axios.js"></script>

<script type="text/javascript">

	new Vue({
		el:"#app",
		data(){
			return {
				// 自定义的属性
				pojo:{} ,//表单上绑定的实体，页面填写后自动绑定到vue的pojo里
				password:'',//表单上的确认密码
				nameMessage:'',
				pwMessage:'',
				usLength:'',
				pwLength:'',
				user:{},
				loginName:'',
				loginPassword:''
			}
		},
		methods:{
			login(){
				if (this.checkName()&&this.checkPassword()) {
					axios.post(`/user/login.do`, this.pojo).then(response => {
						this.user = response.data;
						this.username = response.data.username;
						if (this.username == null) {
							alert("用户名不存在，或密码有误");
						} else {
							sessionStorage.setItem("userInfo", JSON.stringify(this.user));
							window.location.href = "index.html"
						}
					})
				}else{
					alert("请根据红字提示修改输入框的信息后重试！");
				}
			},
			checkName(){
				let userName = this.$refs.nameInput.value;
				if (userName==""){
					this.nameMessage="用户名不能为空";
					return false;
				}
				var usLength = userName.length;
				if(4>usLength||usLength>16){
					this.nameMessage="请输入正确的用户名长度(4~16位长度)"
					return false;
				}
				this.nameMessage="";
				return true;
			},
			checkPassword(){
				let password = this.$refs.pwInput.value;
				if (password==""){
					this.pwMessage="登录密码不能为空";
					return false;
				}
				var pwLength = password.length;
				if(4>pwLength||pwLength>16){
					this.pwMessage="请输入正确的密码长度(4~16位长度)"
					return false;
				}
				this.pwMessage="";
				return true;
			}
		}
	});

	function switchSuiForm() {
		document.getElementById('index').className = "tab-pane";
		document.getElementById('profile').className = "tab-pane active";
		document.getElementById('tabSuiForm').className = "active";
		document.getElementById('tabOtherLogin').className = "";
	}
	function switchOtherLogin() {
		document.getElementById('index').className = "tab-pane active";
		document.getElementById('profile').className = "tab-pane";
		document.getElementById('tabSuiForm').className = "";
		document.getElementById('tabOtherLogin').className = "active";
	}
</script>
</body>
</html>